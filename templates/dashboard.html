<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Painel Financeiro</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='dashboard.css') }}">
</head>
<body>
 <nav>
  <ul>
    <li><a href="{{ url_for('dashboard') }}">Início</a></li>
    <li><a href="{{ url_for('adicionar_receita') }}">Receita</a></li>
    <li><a href="{{ url_for('adicionar_despesa') }}" class="active">Despesa</a></li>
    <li><a href="{{ url_for('historico') }}">Histórico</a></li>
    <li><a href="{{ url_for('agendar_transacao') }}">Agendar</a></li>
    <li><a href="{{ url_for('logout') }}">Sair</a></li>
  </ul>
</nav>

        <h2 class="text-center mt-4">Painel Financeiro</h2>
        <div class="dashboard-container">
            <div class="graficos-container">
                <div class="grafico-box">
                    <div class="titulo-saldo">
                        <h2>Receita</h2>
                        <span class="saldo">R$ {{ total_receitas }}</span>
                    </div>
                    <canvas id="graficoReceita"></canvas>
                </div>
                <div class="grafico-box">
                    <div class="titulo-saldo">
                        <h2>Despesa</h2>
                        <span class="saldo">R$ {{ total_despesas }}</span>
                    </div>
                    <canvas id="graficoDespesa"></canvas>
                </div>
            </div>
        </div>
    </main>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        const labels = {{ labels_meses|tojson }};
        const receitaData = {{ valores_receitas|tojson }};
        const despesaData = {{ valores_despesas|tojson }};

        const ctxReceita = document.getElementById('graficoReceita').getContext('2d');
        const graficoReceita = new Chart(ctxReceita, {
            type: 'bar',
            data: {
                labels: labels,
                datasets: [{
                    label: 'Receita',
                    data: receitaData,
                    backgroundColor: '#5b2be0'
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    y: { beginAtZero: true }
                }
            }
        });

        const ctxDespesa = document.getElementById('graficoDespesa').getContext('2d');
        const graficoDespesa = new Chart(ctxDespesa, {
            type: 'bar',
            data: {
                labels: labels,
                datasets: [{
                    label: 'Despesa',
                    data: despesaData,
                    backgroundColor: '#ff5b5b'
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    y: { beginAtZero: true }
                }
            }
        });
    </script>
</body>
</html>
